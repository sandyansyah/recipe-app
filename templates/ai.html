<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GOD of FOOD - AI Assistant</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --primary-solid: #667eea;
            --secondary: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --secondary-solid: #f5576c;
            --accent: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            --accent-solid: #4facfe;
            --success: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
            --success-solid: #43e97b;
            --warning: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
            --dark: #1a1a2e;
            --dark-secondary: #16213e;
            --dark-tertiary: #0f3460;
            --light: #ffffff;
            --light-secondary: #f8fafc;
            --light-tertiary: #e2e8f0;
            --text-primary: #2d3748;
            --text-secondary: #718096;
            --text-light: #a0aec0;
            --glass-bg: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
            --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.1);
            --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1);
            --shadow-xl: 0 20px 25px rgba(0, 0, 0, 0.15);
            --border-radius: 20px;
            --border-radius-sm: 12px;
            --border-radius-lg: 24px;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-fast: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            min-height: 100vh;
            color: var(--text-primary);
            overflow-x: hidden;
        }

        /* Animated Background */
        .bg-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
        }

        .bg-animation::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 1px, transparent 1px);
            background-size: 50px 50px;
            animation: float 20s linear infinite;
        }

        @keyframes float {
            0% { transform: translate(0, 0) rotate(0deg); }
            100% { transform: translate(-50px, -50px) rotate(360deg); }
        }

        /* Mobile-first responsive container */
        .app-container {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            position: relative;
        }

        /* Header for mobile */
        .mobile-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem;
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--glass-border);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .mobile-header h1 {
            font-size: 1.5rem;
            font-weight: 700;
            background: var(--primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .menu-toggle {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--light);
            cursor: pointer;
            transition: var(--transition-fast);
        }

        .menu-toggle:hover {
            transform: scale(1.1);
        }

        /* Sidebar */
        .sidebar {
            position: fixed;
            top: 0;
            left: -280px;
            width: 280px;
            height: 100vh;
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border-right: 1px solid var(--glass-border);
            z-index: 200;
            transition: var(--transition);
            overflow-y: auto;
        }

        .sidebar.open {
            left: 0;
        }

        .sidebar-header {
            padding: 2rem 1.5rem;
            text-align: center;
            border-bottom: 1px solid var(--glass-border);
        }

        .sidebar-header h1 {
            font-size: 1.8rem;
            font-weight: 700;
            background: var(--primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
        }

        .sidebar-header p {
            color: var(--light);
            opacity: 0.8;
            font-size: 0.9rem;
        }

        .nav-menu {
            padding: 1.5rem 0;
        }

        .nav-item {
            margin: 0.5rem 1rem;
        }

        .nav-link {
            display: flex;
            align-items: center;
            padding: 1rem 1.5rem;
            color: var(--light);
            text-decoration: none;
            border-radius: var(--border-radius-sm);
            transition: var(--transition-fast);
            font-weight: 500;
        }

        .nav-link:hover,
        .nav-link.active {
            background: var(--glass-bg);
            backdrop-filter: blur(10px);
            transform: translateX(5px);
        }

        .nav-link.active {
            background: var(--accent);
            color: var(--light);
        }

        /* Main content */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 1rem;
            padding: 1rem;
            transition: var(--transition);
        }

        /* Chat container */
        .chat-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1rem;
            height: calc(100vh - 200px);
        }

        /* Chat messages */
        .chat-messages {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: var(--border-radius);
            overflow-y: auto;
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
            animation: slideInUp 0.6s ease-out;
        }

        .message {
            display: flex;
            gap: 1rem;
            animation: fadeInScale 0.5s ease-out;
        }

        .message.user {
            flex-direction: row-reverse;
        }

        .message-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            color: var(--light);
            flex-shrink: 0;
        }

        .message.ai .message-avatar {
            background: var(--accent);
        }

        .message.user .message-avatar {
            background: var(--secondary);
        }

        .message-content {
            background: var(--light);
            padding: 1rem 1.5rem;
            border-radius: var(--border-radius-sm);
            box-shadow: var(--shadow-sm);
            max-width: 80%;
            word-wrap: break-word;
            position: relative;
            animation: messageSlide 0.4s ease-out;
        }

        .message.user .message-content {
            background: var(--primary);
            color: var(--light);
        }

        .message-content::before {
            content: '';
            position: absolute;
            top: 15px;
            width: 0;
            height: 0;
            border: 8px solid transparent;
        }

        .message.ai .message-content::before {
            left: -16px;
            border-right-color: var(--light);
        }

        .message.user .message-content::before {
            right: -16px;
            border-left-color: var(--primary-solid);
        }

        /* Input area */
        .input-area {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            margin-top: auto;
            animation: slideInUp 0.6s ease-out 0.2s both;
        }

        .input-container {
            display: flex;
            gap: 1rem;
            align-items: flex-end;
        }

        .input-wrapper {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .selected-ingredients {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .ingredient-tag {
            background: var(--success);
            color: var(--light);
            padding: 0.5rem 1rem;
            border-radius: 25px;
            font-size: 0.875rem;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            animation: popIn 0.3s ease-out;
        }

        .remove-ingredient {
            background: none;
            border: none;
            color: var(--light);
            font-size: 1.2rem;
            cursor: pointer;
            padding: 0;
            transition: var(--transition-fast);
        }

        .remove-ingredient:hover {
            transform: scale(1.2);
        }

        .input-field {
            display: flex;
            background: var(--light);
            border-radius: 25px;
            padding: 0.75rem 1.5rem;
            box-shadow: var(--shadow-md);
            transition: var(--transition-fast);
        }

        .input-field:focus-within {
            box-shadow: var(--shadow-lg);
            transform: translateY(-2px);
        }

        .input-field input {
            flex: 1;
            border: none;
            outline: none;
            font-size: 1rem;
            background: transparent;
        }

        .send-button {
            background: var(--accent);
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            color: var(--light);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition-fast);
            box-shadow: var(--shadow-md);
        }

        .send-button:hover {
            transform: scale(1.1);
            box-shadow: var(--shadow-lg);
        }

        .send-button:active {
            transform: scale(0.95);
        }

        /* Ingredients panel */
        .ingredients-panel {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            max-height: 300px;
            overflow-y: auto;
            animation: slideInRight 0.6s ease-out 0.1s both;
        }

        .ingredients-panel h3 {
            color: var(--light);
            margin-bottom: 1rem;
            font-weight: 600;
        }

        .ingredients-search {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid var(--glass-border);
            border-radius: var(--border-radius-sm);
            background: var(--glass-bg);
            color: var(--light);
            margin-bottom: 1rem;
            outline: none;
            transition: var(--transition-fast);
        }

        .ingredients-search:focus {
            border-color: var(--accent-solid);
            box-shadow: 0 0 0 3px rgba(79, 172, 254, 0.1);
        }

        .ingredients-list {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .ingredient-item {
            padding: 0.75rem;
            background: var(--glass-bg);
            border-radius: var(--border-radius-sm);
            color: var(--light);
            cursor: pointer;
            transition: var(--transition-fast);
            border: 1px solid transparent;
        }

        .ingredient-item:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateX(5px);
        }

        .ingredient-item.selected {
            background: var(--success);
            border-color: var(--success-solid);
        }

        /* Recommendations */
        .recommendations {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: var(--border-radius);
            padding: 1.5rem;
            animation: slideInLeft 0.6s ease-out 0.3s both;
        }

        .recommendations h3 {
            color: var(--light);
            margin-bottom: 1rem;
            font-weight: 600;
        }

        .recommendation-card {
            background: var(--light);
            border-radius: var(--border-radius-sm);
            padding: 1rem;
            margin-bottom: 1rem;
            cursor: pointer;
            transition: var(--transition-fast);
            box-shadow: var(--shadow-sm);
            animation: slideInUp 0.4s ease-out;
        }

        .recommendation-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .recommendation-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .recommendation-title {
            font-weight: 600;
            color: var(--text-primary);
        }

        .match-score {
            background: var(--accent);
            color: var(--light);
            padding: 0.25rem 0.75rem;
            border-radius: 15px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .recommendation-ingredients {
            color: var(--text-secondary);
            font-size: 0.875rem;
        }

        /* Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal {
            background: var(--light);
            border-radius: var(--border-radius);
            max-width: 600px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            transform: scale(0.8);
            transition: var(--transition);
        }

        .modal-overlay.active .modal {
            transform: scale(1);
        }

        .modal-header {
            background: var(--primary);
            color: var(--light);
            padding: 1.5rem;
            border-radius: var(--border-radius) var(--border-radius) 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h2 {
            font-weight: 600;
        }

        .close-button {
            background: none;
            border: none;
            color: var(--light);
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 50%;
            transition: var(--transition-fast);
        }

        .close-button:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .modal-content {
            padding: 1.5rem;
        }

        .modal-section {
            margin-bottom: 2rem;
        }

        .modal-section h3 {
            color: var(--text-primary);
            margin-bottom: 1rem;
            font-weight: 600;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--light-tertiary);
        }

        .ingredients-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 0.75rem;
        }

        .ingredient-card {
            background: var(--light-secondary);
            padding: 0.75rem;
            border-radius: var(--border-radius-sm);
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: var(--transition-fast);
        }

        .ingredient-card.available {
            background: rgba(67, 233, 123, 0.1);
            border-left: 3px solid var(--success-solid);
        }

        /* Animations */
        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes fadeInScale {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes popIn {
            from {
                opacity: 0;
                transform: scale(0.8);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes messageSlide {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        /* Responsive Design */
        @media (min-width: 768px) {
            .mobile-header {
                display: none;
            }

            .sidebar {
                position: relative;
                left: 0;
                width: 280px;
                border-radius: 0 var(--border-radius) var(--border-radius) 0;
            }

            .app-container {
                flex-direction: row;
            }

            .main-content {
                padding: 2rem;
            }

            .chat-container {
                grid-template-columns: 1fr 300px;
                height: calc(100vh - 240px);
            }

            .input-area {
                margin-top: 0;
            }
        }

        @media (min-width: 1024px) {
            .chat-container {
                grid-template-columns: 300px 1fr 300px;
                gap: 2rem;
            }

            .main-content {
                padding: 2rem 3rem;
            }
        }

        /* Loading animation */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 0.5rem;
            padding: 1rem;
        }

        .loading-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--accent-solid);
            animation: loadingDots 1.4s infinite ease-in-out;
        }

        .loading-dot:nth-child(1) { animation-delay: -0.32s; }
        .loading-dot:nth-child(2) { animation-delay: -0.16s; }

        @keyframes loadingDots {
            0%, 80%, 100% {
                transform: scale(0);
                opacity: 0.5;
            }
            40% {
                transform: scale(1);
                opacity: 1;
            }
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.5);
        }
    </style>
</head>
<body>
    <div class="bg-animation"></div>
    
    <div class="app-container">
        <!-- Mobile Header -->
        <div class="mobile-header">
            <h1>GOD of FOOD</h1>
            <button class="menu-toggle" id="menuToggle">☰</button>
        </div>

        <!-- Sidebar -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h1>GOD of FOOD</h1>
                <p>AI Recipe Assistant</p>
            </div>
            <nav class="nav-menu">
                <div class="nav-item">
                    <a href="#" class="nav-link">🏠 Beranda</a>
                </div>
                <div class="nav-item">
                    <a href="#" class="nav-link">📚 Resep</a>
                </div>
                <div class="nav-item">
                    <a href="#" class="nav-link active">🤖 AI Assistant</a>
                </div>
            </nav>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <div class="chat-container">
                <!-- Ingredients Panel (Desktop) -->
                <div class="ingredients-panel">
                    <h3>📦 Available Ingredients</h3>
                    <input type="text" class="ingredients-search" placeholder="Search ingredients..." id="ingredientSearch">
                    <div class="ingredients-list" id="ingredientsList">
                        <div class="ingredient-item" data-ingredient="Rice">🍚 Rice</div>
                        <div class="ingredient-item" data-ingredient="Chicken">🐔 Chicken</div>
                        <div class="ingredient-item" data-ingredient="Eggs">🥚 Eggs</div>
                        <div class="ingredient-item" data-ingredient="Tomatoes">🍅 Tomatoes</div>
                        <div class="ingredient-item" data-ingredient="Onions">🧅 Onions</div>
                        <div class="ingredient-item" data-ingredient="Garlic">🧄 Garlic</div>
                        <div class="ingredient-item" data-ingredient="Potatoes">🥔 Potatoes</div>
                        <div class="ingredient-item" data-ingredient="Carrots">🥕 Carrots</div>
                    </div>
                </div>

                <!-- Chat Messages -->
                <div class="chat-messages" id="chatMessages">
                    <div class="message ai">
                        <div class="message-avatar">🤖</div>
                        <div class="message-content">
                            <p>Hello! I'm your AI Recipe Assistant. 👨‍🍳</p>
                            <p>Tell me what ingredients you have, and I'll recommend delicious recipes you can make!</p>
                            <p>Try saying "I have rice, chicken, and vegetables" or select ingredients from the panel.</p>
                        </div>
                    </div>
                </div>

                <!-- Recommendations -->
                <div class="recommendations" id="recommendations">
                    <h3>🌟 Recipe Recommendations</h3>
                    <div id="recommendationsList">
                        <p style="color: var(--light); opacity: 0.7; text-align: center; padding: 2rem;">
                            Select ingredients to get personalized recipe recommendations!
                        </p>
                    </div>
                </div>
            </div>

            <!-- Input Area -->
            <div class="input-area">
                <div class="input-container">
                    <div class="input-wrapper">
                        <div class="selected-ingredients" id="selectedIngredients">
                            <!-- Selected ingredients will appear here -->
                        </div>
                        <form class="input-field" id="chatForm">
                            <input type="text" placeholder="Tell me what ingredients you have..." id="userInput">
                            <button type="submit" class="send-button">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <line x1="22" y1="2" x2="11" y2="13"></line>
                                    <polygon points="22,2 15,22 11,13 2,9 22,2"></polygon>
                                </svg>
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Recipe Modal -->
    <div class="modal-overlay" id="recipeModal">
        <div class="modal">
            <div class="modal-header">
                <h2 id="modalTitle">Recipe Details</h2>
                <button class="close-button" id="closeModal">×</button>
            </div>
            <div class="modal-content" id="modalContent">
                <!-- Recipe details will be populated here -->
            </div>
        </div>
    </div>

    <script>
        class AIAssistant {
            constructor() {
                this.selectedIngredients = new Set();
                this.recipes = [
                    {
                        name: "Fried Rice",
                        ingredients: ["Rice", "Eggs", "Onions", "Garlic"],
                        instructions: "Heat oil in a pan. Add garlic and onions, cook until fragrant. Add rice and eggs, stir-fry until well combined. Season with soy sauce and serve hot.",
                        difficulty: "Easy",
                        time: "15 minutes"
                    },
                    {
                        name: "Chicken Curry",
                        ingredients: ["Chicken", "Onions", "Garlic", "Tomatoes"],
                        instructions: "Heat oil in a pot. Add onions and garlic, cook until soft. Add chicken pieces and cook until browned. Add tomatoes and spices, simmer for 20 minutes.",
                        difficulty: "Medium",
                        time: "30 minutes"
                    },
                    {
                        name: "Vegetable Soup",
                        ingredients: ["Carrots", "Potatoes", "Onions", "Garlic"],
                        instructions: "Heat oil in a large pot. Add onions and garlic, cook until fragrant. Add chopped vegetables and water. Simmer for 25 minutes until vegetables are tender.",
                        difficulty: "Easy",
                        time: "35 minutes"
                    }
                ];
                this.init();
            }

            init() {
                this.bindEvents();
                this.renderIngredients();
            }

            bindEvents() {
                // Menu toggle
                document.getElementById('menuToggle').addEventListener('click', () => {
                    document.getElementById('sidebar').classList.toggle('open');
                });

                // Close sidebar when clicking outside on mobile
                document.addEventListener('click', (e) => {
                    const sidebar = document.getElementById('sidebar');
                    const menuToggle = document.getElementById('menuToggle');
                    if (!sidebar.contains(e.target) && !menuToggle.contains(e.target)) {
                        sidebar.classList.remove('open');
                    }
                });

                // Ingredient search
                document.getElementById('ingredientSearch').addEventListener('input', (e) => {
                    this.filterIngredients(e.target.value);
                });

                // Chat form
                document.getElementById('chatForm').addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.handleUserMessage();
                });

                // Modal close
                document.getElementById('closeModal').addEventListener('click', () => {
                    document.getElementById('recipeModal').classList.remove('active');
                });

                document.getElementById('recipeModal').addEventListener('click', (e) => {
                    if (e.target.id === 'recipeModal') {
                        document.getElementById('recipeModal').classList.remove('active');
                    }
                });
            }

            filterIngredients(query) {
                const ingredients = document.querySelectorAll('.ingredient-item');
                ingredients.forEach(item => {
                    const text = item.textContent.toLowerCase();
                    if (text.includes(query.toLowerCase())) {
                        item.style.display = 'block';
                        item.style.animation = 'fadeInScale 0.3s ease-out';
                    } else {
                        item.style.display = 'none';
                    }
                });
            }

            renderIngredients() {
                const container = document.getElementById('ingredientsList');
                const ingredients = ['Rice', 'Chicken', 'Eggs', 'Tomatoes', 'Onions', 'Garlic', 'Potatoes', 'Carrots', 'Beef', 'Pork', 'Fish', 'Shrimp', 'Mushrooms', 'Bell Peppers', 'Broccoli', 'Spinach', 'Lettuce', 'Cucumber', 'Cheese', 'Milk', 'Butter', 'Oil', 'Salt', 'Pepper', 'Soy Sauce'];
                const emojis = ['🍚', '🐔', '🥚', '🍅', '🧅', '🧄', '🥔', '🥕', '🥩', '🥓', '🐟', '🦐', '🍄', '🫑', '🥦', '🥬', '🥬', '🥒', '🧀', '🥛', '🧈', '🛢️', '🧂', '🌶️', '🥢'];
                
                container.innerHTML = '';
                ingredients.forEach((ingredient, index) => {
                    const div = document.createElement('div');
                    div.className = 'ingredient-item';
                    div.dataset.ingredient = ingredient;
                    div.innerHTML = `${emojis[index] || '🥘'} ${ingredient}`;
                    div.addEventListener('click', () => this.toggleIngredient(ingredient, div));
                    container.appendChild(div);
                });
            }

            toggleIngredient(ingredient, element) {
                if (this.selectedIngredients.has(ingredient)) {
                    this.selectedIngredients.delete(ingredient);
                    element.classList.remove('selected');
                    this.removeIngredientTag(ingredient);
                } else {
                    this.selectedIngredients.add(ingredient);
                    element.classList.add('selected');
                    this.addIngredientTag(ingredient);
                }
                this.updateInputText();
                this.getRecommendations();
            }

            addIngredientTag(ingredient) {
                const container = document.getElementById('selectedIngredients');
                const tag = document.createElement('div');
                tag.className = 'ingredient-tag';
                tag.dataset.ingredient = ingredient;
                tag.innerHTML = `
                    <span>${ingredient}</span>
                    <button class="remove-ingredient" type="button">×</button>
                `;
                
                tag.querySelector('.remove-ingredient').addEventListener('click', () => {
                    this.toggleIngredient(ingredient, document.querySelector(`[data-ingredient="${ingredient}"]`));
                });
                
                container.appendChild(tag);
            }

            removeIngredientTag(ingredient) {
                const tag = document.querySelector(`#selectedIngredients [data-ingredient="${ingredient}"]`);
                if (tag) {
                    tag.style.animation = 'fadeOut 0.3s ease-out';
                    setTimeout(() => tag.remove(), 300);
                }
            }

            updateInputText() {
                const input = document.getElementById('userInput');
                if (this.selectedIngredients.size > 0) {
                    input.value = `I have ${Array.from(this.selectedIngredients).join(', ')}`;
                } else {
                    input.value = '';
                }
            }

            handleUserMessage() {
                const input = document.getElementById('userInput');
                const message = input.value.trim();
                
                if (!message) return;

                this.addMessage(message, 'user');
                input.value = '';

                // Show loading
                this.showLoading();

                // Simulate AI processing
                setTimeout(() => {
                    this.hideLoading();
                    this.processUserInput(message);
                }, 1500);
            }

            addMessage(content, type) {
                const container = document.getElementById('chatMessages');
                const messageDiv = document.createElement('div');
                messageDiv.className = `message ${type}`;
                
                const avatar = type === 'ai' ? '🤖' : '👤';
                messageDiv.innerHTML = `
                    <div class="message-avatar">${avatar}</div>
                    <div class="message-content">
                        <p>${content}</p>
                    </div>
                `;
                
                container.appendChild(messageDiv);
                container.scrollTop = container.scrollHeight;
            }

            showLoading() {
                const container = document.getElementById('chatMessages');
                const loadingDiv = document.createElement('div');
                loadingDiv.className = 'message ai loading-message';
                loadingDiv.innerHTML = `
                    <div class="message-avatar">🤖</div>
                    <div class="message-content">
                        <div class="loading">
                            <div class="loading-dot"></div>
                            <div class="loading-dot"></div>
                            <div class="loading-dot"></div>
                        </div>
                    </div>
                `;
                container.appendChild(loadingDiv);
                container.scrollTop = container.scrollHeight;
            }

            hideLoading() {
                const loading = document.querySelector('.loading-message');
                if (loading) loading.remove();
            }

            processUserInput(message) {
                // Extract ingredients from message
                const extractedIngredients = this.extractIngredients(message);
                
                let response = '';
                if (extractedIngredients.length > 0) {
                    // Update selected ingredients
                    extractedIngredients.forEach(ingredient => {
                        if (!this.selectedIngredients.has(ingredient)) {
                            this.selectedIngredients.add(ingredient);
                            this.addIngredientTag(ingredient);
                            const element = document.querySelector(`[data-ingredient="${ingredient}"]`);
                            if (element) element.classList.add('selected');
                        }
                    });
                    
                    response = `Great! I found these ingredients: ${extractedIngredients.join(', ')}. Let me recommend some recipes for you!`;
                    this.getRecommendations();
                } else {
                    response = "I couldn't identify specific ingredients. Try selecting them from the ingredient panel or be more specific about what you have.";
                }
                
                this.addMessage(response, 'ai');
            }

            extractIngredients(message) {
                const ingredients = ['Rice', 'Chicken', 'Eggs', 'Tomatoes', 'Onions', 'Garlic', 'Potatoes', 'Carrots', 'Beef', 'Pork', 'Fish', 'Shrimp', 'Mushrooms', 'Bell Peppers', 'Broccoli', 'Spinach'];
                const found = [];
                
                ingredients.forEach(ingredient => {
                    if (message.toLowerCase().includes(ingredient.toLowerCase())) {
                        found.push(ingredient);
                    }
                });
                
                return found;
            }

            getRecommendations() {
                const container = document.getElementById('recommendationsList');
                
                if (this.selectedIngredients.size === 0) {
                    container.innerHTML = `
                        <p style="color: var(--light); opacity: 0.7; text-align: center; padding: 2rem;">
                            Select ingredients to get personalized recipe recommendations!
                        </p>
                    `;
                    return;
                }

                const recommendations = this.recipes.filter(recipe => {
                    const matchCount = recipe.ingredients.filter(ing => 
                        this.selectedIngredients.has(ing)
                    ).length;
                    return matchCount > 0;
                }).map(recipe => {
                    const matchCount = recipe.ingredients.filter(ing => 
                        this.selectedIngredients.has(ing)
                    ).length;
                    const matchPercentage = Math.round((matchCount / recipe.ingredients.length) * 100);
                    return { ...recipe, matchPercentage, matchCount };
                }).sort((a, b) => b.matchPercentage - a.matchPercentage);

                if (recommendations.length === 0) {
                    container.innerHTML = `
                        <p style="color: var(--light); opacity: 0.7; text-align: center; padding: 2rem;">
                            No matching recipes found. Try adding more ingredients!
                        </p>
                    `;
                    return;
                }

                container.innerHTML = '';
                recommendations.forEach((recipe, index) => {
                    const card = document.createElement('div');
                    card.className = 'recommendation-card';
                    card.style.animationDelay = `${index * 0.1}s`;
                    card.innerHTML = `
                        <div class="recommendation-header">
                            <div class="recommendation-title">${recipe.name}</div>
                            <div class="match-score">${recipe.matchPercentage}% match</div>
                        </div>
                        <div class="recommendation-ingredients">
                            ${recipe.ingredients.slice(0, 3).join(', ')}${recipe.ingredients.length > 3 ? '...' : ''}
                        </div>
                    `;
                    card.addEventListener('click', () => this.showRecipeDetails(recipe));
                    container.appendChild(card);
                });
            }

            showRecipeDetails(recipe) {
                const modal = document.getElementById('recipeModal');
                const title = document.getElementById('modalTitle');
                const content = document.getElementById('modalContent');
                
                title.textContent = recipe.name;
                
                content.innerHTML = `
                    <div class="modal-section">
                        <h3>📝 Recipe Info</h3>
                        <p><strong>Difficulty:</strong> ${recipe.difficulty}</p>
                        <p><strong>Cooking Time:</strong> ${recipe.time}</p>
                    </div>
                    
                    <div class="modal-section">
                        <h3>🛒 Ingredients</h3>
                        <div class="ingredients-grid">
                            ${recipe.ingredients.map(ingredient => `
                                <div class="ingredient-card ${this.selectedIngredients.has(ingredient) ? 'available' : ''}">
                                    ${this.selectedIngredients.has(ingredient) ? 
                                        '<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#43e97b" stroke-width="2"><polyline points="20 6 9 17 4 12"></polyline></svg>' : 
                                        '<span style="color: #f5576c;">○</span>'
                                    }
                                    <span>${ingredient}</span>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    
                    <div class="modal-section">
                        <h3>👨‍🍳 Instructions</h3>
                        <p style="line-height: 1.6;">${recipe.instructions}</p>
                    </div>
                `;
                
                modal.classList.add('active');
            }
        }

        // Initialize the application
        document.addEventListener('DOMContentLoaded', () => {
            new AIAssistant();
        });

        // Add CSS for fade out animation
        const style = document.createElement('style');
        style.textContent = `
            @keyframes fadeOut {
                from {
                    opacity: 1;
                    transform: scale(1);
                }
                to {
                    opacity: 0;
                    transform: scale(0.8);
                }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>
